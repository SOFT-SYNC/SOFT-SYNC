<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
<!-- <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet"> -->
<title>진척검수</title>
<script
   src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<link type="text/css" rel="stylesheet" href="../css/common/header.css">
<link type="text/css" rel="stylesheet" href="../css/common/common.css">
<link type="text/css" rel="stylesheet" href="../css/common/sidebar.css">
<link type="text/css" rel="stylesheet" href="../css/orders/purchase_schedule.css">
  <script type="text/javascript" src="../js/sidebar.js"></script>
</head>
<body>
   <div th:insert="~{common/sidebar :: sidebar}"></div>
   <div class="main-content">
      <div th:insert="~{common/header :: header}"></div>
      <div id="row1">
         <h2 class="visual-title">구매 발주서</h2>
         <!-- (상단)구매발주서  테이블-->
         <div id="toptb">
            <button type="submit" class="blueBtn">마감</button>
            <table class="table">
               <colgroup>
               </colgroup>
               <thead>
                  <tr>
                     <th>발주번호</th>
                     <th>발주일</th>
                     <th>입고예정일</th>
                     <th>품목코드</th>
                     <th>품명</th>
              		 <th>발주수량</th>
                  </tr>
                  <tr>
                     <td>*******</td>
                     <td>*******</td>
                     <td>*******</td> 
                     <td>*******</td>
                     <td>*******</td>
                     <td>*******</td>
                  </tr>
               </thead>
            </table>
          
            <table class="inspecPlanList table" id="createtb">
               <tr>
                  <th>차수</th>
                  <th>검수예정일</th>
                  <th>검수일</th>
                  <th>발주량</th>
                  <th>생산량</th>
                  <th>진행률</th>
                  <th>비고</th>
                  <th>진행</th>
               </tr>
            </table>
            <h2 class="visual-title">진척검수 일정 등록</h2>
         <table class="inspecPlanRegi listTable">
            <tr>
               <th>차수</th>
               <th>검수예정일</th>
               <th>생산량</th>
               <th>등록 취소</th>
            </tr>
            <tr>
               <td><input type="text" id="times" readonly disabled></td>
               <td><input type="date" id="duedate"></td>
               <td><input type="text" id="quantity"></td>
               <td>
                  <button type="button" onclick="register()" class="blueBtn">등록</button>
               </td>
            </tr>
         </table>
         </div>
      </div>
      <div id="row2">
           <h2 class="visual-title">검수 예정 품목</h2>
      <table class="listTable">
               <colgroup>
               </colgroup>
               <thead>
                  <tr>
                     <th>발주번호</th>
                     <th>발주일</th>
                     <th>입고예정일</th>
                     <th>품목코드</th>
                     <th>품명</th>
              		 <th>발주수량</th>
              		 <th>검수현황</th>
              		 <th>검수</th>
                  </tr>
                  <tr th:each="contract : ${contracts}" th:if="${contract.orders.size() > 0 && contract.orders[0].receiptYn == 'Y'}">
					<td th:text="${contract.orders.size() > 0 ? contract.orders[0].orderNo : '-'}">발주번호</td>
					<td th:text="${contract.orders.size() > 0 ? contract.orders[0].orderDate : '-'}">발주일</td>
					<td th:text="${contract.lead_time}">납기일</td>
					<td th:text="${contract.item.itemCode}">품목코드</td>
					<td th:text="${contract.item.itemName}">품목명</td>
					<td th:text="${contract.orders.size() > 0 ? contract.orders[0].orderQuantity : '-'}">N/A</td>
					<td></td>
					<td><input type="button" value="검수" class="blueBtn" id="addBtn"></td>
                  </tr>
               </thead>
            </table>
      </div>
   </div>
   <script>
      // Set initial value for 차수
      var time = 1;

      function register() {
         // Get input values
         var 검수예정일 = document.getElementById("duedate").value;
         var 생산량 = document.getElementById("quantity").value;
         var 비고 = "비고란"; // 임의의 비고 생성
         var 진행률 = "계산식";

         // Create a new row
         var table = document.getElementById("createtb");
         var newRow = table.insertRow(-1); // -1 to append at the end
         var cell1 = newRow.insertCell(0);
         var cell2 = newRow.insertCell(1);
         var cell3 = newRow.insertCell(2);
         var cell4 = newRow.insertCell(3);
         var cell5 = newRow.insertCell(4);
         var cell6 = newRow.insertCell(5);
         var cell7 = newRow.insertCell(6);
         var cell8 = newRow.insertCell(7);

         // Add input values to the cells
         cell1.innerHTML = time;
         cell2.innerHTML = 검수예정일;
         cell3.innerHTML = '<input type="date" id="finishDate">now';
         cell4.innerHTML = "300";
         cell5.innerHTML = 생산량;
         cell6.innerHTML = 진행률;
         cell7.innerHTML = 비고;
         cell8.innerHTML = '<button type="button" class="blueBtn">완료</button>  <button type="button" class="blueBtn" onclick="deleteRow(this)">삭제</button>';

         // Increase 차수 for the next registration
         time++;
         document.getElementById("times").value = time;
      }
      
      /*진척검수 상제  */
       function deleteRow(btn) {
              var row = btn.parentNode.parentNode;
              var rowIndex = row.rowIndex;
              document.getElementById("createtb").deleteRow(rowIndex);
      }
   </script>
</body>
</html>