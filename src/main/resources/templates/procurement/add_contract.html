<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link type="text/css" rel="stylesheet" href="../css/header.css">
<link type="text/css" rel="stylesheet" href="../css/common.css">
<link type="text/css" rel="stylesheet" href="../css/add_contract.css">
<link type="text/css" rel="stylesheet" href="../css/sidebar.css">
<title>계약등록</title>
</head>
<body>
	<div th:insert="~{common/sidebar :: sidebar}"></div>
	<div class="main-content">
		<div th:insert="~{common/header :: header}"></div>
		<div id="row1">
			<h2 class="visual-title">계약등록</h2>
			<table class="regi-table">
				<colgroup>
					<col width="20%">
					<col width="70%">
				</colgroup>
				<tr>
					<th>계약서</th>
					<td><input id="addfile" name="contract" type="file"></td>
				</tr>
				<tr>
					<th>사업자번호</th>
					<td></td>
				</tr>
				<tr>
					<th>업체명</th>

					<td></td>
				</tr>
				<tr>
					<th>계좌정보</th>
					<td></td>
				</tr>
				<tr>
					<th>비고</th>
					<td></td>
				</tr>
			</table>
			<button type="submit" class="blueBtn">저장</button>
			<button type="reset" class="blueBtn">초기화</button>
			<table>
				<colgroup>
					<col width="20%">
					<col width="20%">
					<col width="15%">
					<col width="20%">
					<col width="30%">
				</colgroup>
				<tr>
					<th>품목코드</th>
					<th>품목명</th>
					<th>단가</th>
					<th>L/T일</th>
					<th>세부사항</th>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td><input type="number"></td>
					<td><input type="date"></td>
					<td></td>
				</tr>
			</table>
		</div>
		<div id="row2">
			<div id="contractList">
				<h2 class="visual-title">계약관리</h2>
				<div class="search-container">
					<!-- 드롭다운 메뉴로 필터 선택 -->
					<select id="filterSelect">
						<option value="itemCode">품목코드</option>
						<option value="itemName">품목명</option>
					</select>

					<!-- 검색 입력 필드 -->
					<input type="text" id="searchInput" placeholder="검색어를 입력하세요">

					<!-- 검색 버튼 -->
					<button onclick="performSearch()" id="searchInput" class="blueBtn">검색</button>
				</div>
				<table>
					<tr>
						<th>계약번호</th>
						<th>품목코드</th>
						<th>품목명</th>
						<th>업체명</th>
						<th>사업자번호</th>
						<th>단가(원)</th>
						<th>L/T일</th>
						<th>계약여부</th>
						<th>삭제</th>
						<th>계약서</th>
					</tr>
					<tr>
						<td>123456</td>
						<td>ABC-0000</td>
						<td>너트</td>
						<td>SOFTSNYC</td>
						<td>1234567</td>
						<td>-</td>
						<td>-</td>
						<td><input type="button" id="contractYn" class="blueBtn"
							value="계약하기"></td>
						<td><input type="button" id="deleteBtn" class="blueBtn"
							value="삭제"></td>
						<td><input type="button" id="popupBtn" value="계약서보기"></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<div id="modalWrap">
		<div id="modalBody">
			<button type="button" class="closeBtn">&times;</button>
			<img id="modalImage" src="images/contract.jpg">
			<button type="button" class="blueBtn modalBtn">인쇄</button>
		</div>
	</div>

	<script>
const popupBtn = document.getElementById("popupBtn"); // 팝업 버튼 요소 가져오기
const modalWrap = document.getElementById("modalWrap"); // 모달 요소 가져오기
const closeBtn = document.querySelector(".closeBtn"); // 모달 닫기 버튼 요소 가져오기
const modalImage = document.getElementById("modalImage");

// 팝업 버튼 클릭 시 모달 열기
popupBtn.addEventListener("click", function() {
  modalWrap.style.display = "block";
});

// 모달 닫기 버튼 클릭 시 모달 닫기
closeBtn.addEventListener("click", function() {
  modalWrap.style.display = "none";
});

// 모달 외부 클릭 시 모달 닫기
window.addEventListener("click", function(event) {
  if (event.target === modalWrap) {
    modalWrap.style.display = "none";
  }
});

// 이미지 로드 후 모달 크기 조절
modalImage.onload = function() {
  const imageWidth = modalImage.naturalWidth;
  const imageHeight = modalImage.naturalHeight;
  const maxWidth = window.innerWidth * 0.8; // 창 너비의 80%
  const maxHeight = window.innerHeight * 0.8; // 창 높이의 80%
  
  // 이미지 크기에 따라 모달 바디 크기 조절
  if (imageWidth > maxWidth || imageHeight > maxHeight) {
    if (imageWidth / maxWidth > imageHeight / maxHeight) {
      modalBody.style.width = maxWidth + "px";
      modalBody.style.height = "auto";
    } else {
      modalBody.style.width = "auto";
      modalBody.style.height = maxHeight + "px";
    }
  }
  
  openModal(); // 이미지 로드 후 모달 열기
};

</script>
	<script>
  function toggleSidenav() {
      const sidenav = document.querySelector('.sidenav');
      const mainContent = document.querySelector('.main-content');
      const sidenavToggle = document.querySelector('.sidenav-toggle');
  
      if (sidenav.style.left === '0px') {
          sidenav.style.left = '-200px'; // 사이드바 숨기기
          mainContent.style.marginLeft = '0'; // 메인 콘텐츠 원래 위치로
          sidenavToggle.style.left = '5px'; // 토글 버튼 원래 위치로
      } else {
          sidenav.style.left = '0'; // 사이드바 보이기
          mainContent.style.marginLeft = '200px'; // 메인 콘텐츠를 오른쪽으로 밀어냄
          sidenavToggle.style.left = '205px'; // 토글 버튼 오른쪽으로 이동
      }
  }
  
  document.addEventListener('DOMContentLoaded', function() {
      // 드롭다운 버튼을 모두 선택합니다.
      var dropdowns = document.querySelectorAll('.dropdown-btn');
  
      // 각 버튼에 클릭 이벤트 리스너를 추가합니다.
      dropdowns.forEach(function(btn) {
          btn.addEventListener('click', function() {
              // 모든 드롭다운 컨테이너를 닫습니다.
              closeAllDropdowns();
  
              // 현재 클릭된 버튼의 다음 요소(드롭다운 컨테이너)의 표시 상태를 토글합니다.
              var dropdownContainer = this.nextElementSibling;
              dropdownContainer.style.display = dropdownContainer.style.display === 'block' ? 'none' : 'block';
              
              // 클릭된 버튼에 'active' 클래스를 추가합니다.
              this.classList.toggle('active');
          });
      });
  
      // 모든 드롭다운을 닫는 함수
      function closeAllDropdowns() {
          var dropdownContainers = document.querySelectorAll('.dropdown-container');
          dropdownContainers.forEach(function(container) { 
              container.style.display = 'none';
          });
          
          // 모든 드롭다운 버튼에서 'active' 클래스를 제거합니다.
          dropdowns.forEach(function(btn) {
              btn.classList.remove('active');
          });
      }
  });
  </script>
	<script>
    function performSearch() {
        var filter = document.getElementById('filterSelect').value;
        var searchText = document.getElementById('searchInput').value.trim();
        alert("검색 필터: " + filter + "\n검색어: " + searchText);
        // 실제 검색 로직 구현 필요
    }
    </script>
</body>
</html>