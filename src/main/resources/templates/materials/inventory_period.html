<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>기간별 재고목록</title>
<link type="text/css" rel="stylesheet" href="../css/common/header.css">
<link type="text/css" rel="stylesheet" href="../css/common/common.css">
<link type="text/css" rel="stylesheet" href="../css/common/sidebar.css">
<link type="text/css" rel="stylesheet" href="../css/materials/invoice.css">
  <script type="text/javascript" src="../js/sidebar.js"></script>
</head>
<body>
	<div th:insert="~{common/sidebar  :: sidebar}"></div>
			<div th:insert="~{common/header :: header}"></div>
	<div class="main-content">

		<div id="row1">
			<h1 class="visual-title">기간별 재고목록</h1>
			<div class="search-container">
				<form id="searchForm"
					onsubmit="event.preventDefault(); performSearch();">
					<!-- 날짜 선택 영역 -->
					<div class="date-range"> 
						<label for="startDate"></label> <input type="date" id="startDate">
						<label for="endDate">~</label> <input type="date" id="endDate">
					</div>
					<!-- 검색 옵션과 필드 -->
					<div class="search-bar">
						<select id="filterSelect">
							<option value="itemCode">품목코드</option>
							<option value="itemName">품목명</option>
						</select> <input type="text" id="searchInput" placeholder="검색...">
						<button type="button" onclick="performSearch()" class="blueBtn">검색</button>
					</div>
				</form>
				<!-- 결과 표시 테이블 -->
				<table id="resultsTable">
					<thead>
						<tr>
							<th>품목코드
								<button class="sort-button" onclick="sortTable(0)">▲▼</button>
							</th>
							<th>품목명
								<button class="sort-button" onclick="sortTable(1)">▲▼</button>
							</th>
							<th>규격
								<button class="sort-button" onclick="sortTable(2)">▲▼</button>
							</th>
							<th>재질
								<button class="sort-button" onclick="sortTable(3)">▲▼</button>
							</th>
							<th>기초재고
								<button class="sort-button" onclick="sortTable(4)">▲▼</button>
							</th>
							<th>입고수량
								<button class="sort-button" onclick="sortTable(5)">▲▼</button>
							</th>
							<th>출고수량
								<button class="sort-button" onclick="sortTable(6)">▲▼</button>
							</th>
							<th>기말재고
								<button class="sort-button" onclick="sortTable(7)">▲▼</button>
							</th>
							<th>재고금액
								<button class="sort-button" onclick="sortTable(8)">▲▼</button>
							</th>
						</tr>
					</thead>
					<tbody>
						<!-- 동적 결과 -->
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<script>
const dummyData = [
    { itemCode: "001", itemName: "볼트", specification: "M8", material: "스틸", initialStock: 1000, received: 200, dispatched: 150, endingStock: 1050, stockValue: 5000 },
    { itemCode: "002", itemName: "너트", specification: "M8", material: "철", initialStock: 800, received: 300, dispatched: 120, endingStock: 980, stockValue: 3000 },
    { itemCode: "003", itemName: "와셔", specification: "M8", material: "스테인리스", initialStock: 1500, received: 500, dispatched: 200, endingStock: 1800, stockValue: 4500 }
];

document.addEventListener('DOMContentLoaded', function() {
    loadDummyData(dummyData);
});

function loadDummyData(data) {
    const tbody = document.getElementById('resultsTable').getElementsByTagName('tbody')[0];
    tbody.innerHTML = '';
    data.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.itemCode}</td>
                        <td>${item.itemName}</td>
                        <td>${item.specification}</td>
                        <td>${item.material}</td>
                        <td>${item.initialStock}</td>
                        <td>${item.received}</td>
                        <td>${item.dispatched}</td>
                        <td>${item.endingStock}</td>
                        <td>${item.stockValue}</td>`;
        tbody.appendChild(tr);
    });
}

let sortDirections = new Array(9).fill(false);  // assuming 9 columns

function sortTable(column) {
    const direction = sortDirections[column] = !sortDirections[column];
    dummyData.sort((a, b) => {
        const aValue = a[Object.keys(a)[column]];
        const bValue = b[Object.keys(b)[column]];
        if (aValue < bValue) {
            return direction ? 1 : -1;
        } else if (aValue > bValue) {
            return direction ? -1 : 1;
        }
        return 0;
    });
    loadDummyData(dummyData);
}

sortTable.sortDirections = [];

function performSearch() {
    const searchText = document.getElementById('searchInput').value.toLowerCase();
    const filter = document.getElementById('filterSelect').value;
    const filteredData = dummyData.filter(item => item[filter].toString().toLowerCase().includes(searchText));
    loadDummyData(filteredData);
}
</script>

</body>
</html>